<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Довідник дорожніх знаків</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- DEGRADED MODE BANNER -->
  <div id="degradedBanner" style="display:none; background: #e74c3c; color: white; text-align: center; padding: 10px; position: sticky; top: 0; z-index: 1000;">
    ⚠️ Система перевантажена. Деякі функції тимчасово недоступні.
  </div>

  <nav>
    <div class="logo">
      <img src="images/logo_road_sign.jpg" alt="Logo">
      <h2>Дорожні знаки</h2>
    </div>
    <button onclick="openModal()">Особистий кабінет</button>
  </nav>

  <div class="container">
    <h1>Довідник дорожніх знаків</h1>

    <div class="tabs">
      <button class="tab active" onclick="switchTab('signs')">Дорожні знаки</button>
      <button class="tab" onclick="switchTab('users')">Користувачі</button>
    </div>

    <!-- === Знаки === -->
    <div id="signs-tab" class="tab-content active">
      <div class="controls">
        <button onclick="loadAllSigns()">Усі</button>
        <button onclick="loadSignsByCategory('Заборонні')">Заборонні</button>
        <button onclick="loadSignsByCategory('Пріоритету')">Пріоритету</button>
        <button onclick="loadSignsByCategory('Інформаційні')">Інформаційні</button>
        <button onclick="loadSignsByCategory('Попереджувальні')">Попереджувальні</button>

        <button onclick="createTestSign()" style="background: #f1c40f; color: black; margin-left: 20px;">⚡ Тест Ідемпотентності</button>
      </div>

      <div id="loading" style="display:none;text-align:center;">⏳ Завантаження...</div>
      <div id="signsList" class="signs-container"></div>
    </div>

    <!-- === Користувачі === -->
    <div id="users-tab" class="tab-content">
      <div class="admin-panel">
        <h2>Управління користувачами</h2>
        <button onclick="loadAllUsers()">Оновити список</button>
        <div id="usersLoading" style="display:none;">⏳ Завантаження користувачів...</div>
        <div id="usersList"></div>
      </div>
    </div>
  </div>

  <!-- === MODAL AUTH === -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">✖</span>

      <div id="authStatus" style="display:none; margin-bottom: 15px;">
        <p>Ви увійшли як: <strong id="authUsername"></strong></p>
        <button id="logout-btn" onclick="logout()" style="background: #e74c3c;">Вийти</button>
      </div>

      <div id="authForm">
        <h3>Увійти / Зареєструватися</h3>
        <input type="text" id="username" placeholder="Ім'я користувача">
        <input type="password" id="password" placeholder="Пароль">
        <button onclick="login()">Увійти</button>
        <button onclick="register()">Зареєструватися</button>
      </div>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>